<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Interactive rating component</title>

    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  </head>
  <body>
    <!-- Rating state start -->

    <div class="container">
      <div id="main">
        <div class="image-wrapper flex">
          <img src="./images/icon-star.svg" alt="" />
          <div class="tooltext">Please, rate us</div>
        </div>
        <h3>How did we do?</h3>
        <p>
          Please let us know how we did with your support request. All feedback
          is appreciated to help us improve our offering!
        </p>
        <div class="rating">
          <ul class="flex">
            <li class="item">1</li>
            <li class="item">2</li>
            <li class="item">3</li>
            <li class="item">4</li>
            <li class="item">5</li>
          </ul>
        </div>
        <button id="btn">Submit</button>
      </div>
      <div id="thanks">
        <div class="flex flex-col">
          <div class="thanks-img">
            <img src="./images/illustration-thank-you.svg" alt="" />
          </div>
          <div class="rate-info">
            You selected <span id="rating">0</span> out of 5
          </div>
          <div class="thank-you">Thank you!</div>
          <p class="thanks-text">
            We appreciate you taking the time to give a rating. If you ever need
            more support, don't hesitate to get in touch!
          </p>
        </div>
      </div>
    </div>

    <script>
      const elements = document.getElementsByClassName("item");

      //convert a 'HTMLCollection' to an array type
      const items = [...elements];
      // console.log(items);
      let selectedRating;
      items.forEach((item, i) => {
        item.addEventListener("click", (e) => {
          //handle click
          items.forEach((item) => {
            item.classList.remove("selected");
          });

          e.target.classList.toggle("selected");
          selectedRating = item.innerText;
        });
      });

      //thanks block
      const btn = document.getElementById("btn");
      const main = document.querySelector("#main");
      const thanks = document.querySelector("#thanks");
      const rating = document.querySelector("#rating");
      const tool = document.querySelector(".tooltext");

      btn.addEventListener("click", () => {
        if (selectedRating) {
          console.log("clicked");
          main.style.display = "none";
          thanks.style.display = "flex";
          rating.innerText = selectedRating ? selectedRating : "0";
        } else {
          tool.style.display = "block";
          setTimeout(() => {
            tool.style.display = "none";
          }, 2000);
        }
      });
    </script>
  </body>
</html>
